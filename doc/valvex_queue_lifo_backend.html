<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module valvex_queue_lifo_backend</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module valvex_queue_lifo_backend</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Valvex LIFO backend.
<p>Copyright Â© 2016 Howard Beard-Marlowe</p>

<p><b>Version:</b> 1.0.0</p>
<p><b>Behaviours:</b> <a href="gen_server.html"><tt>gen_server</tt></a>, <a href="valvex_queue.html"><tt>valvex_queue</tt></a>.</p>
<p><b>Authors:</b> Howard Beard-Marlowe (<a href="mailto:howardbm@live.se"><tt>howardbm@live.se</tt></a>).</p>

<h2><a name="description">Description</a></h2><p>Valvex LIFO backend</p>
 
  The fifo backend provides a last in first out behaviour for valvex
  it uses a standard erlang queue - if this behaviour does not suit
  your application or you wish to use a custom queue feel free
  to create your own backend, be careful to ensure you adhere to
  to the behaviour of a valvex queue and to include knowledge
  of locking and tombstoning to your backend.
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#code_change-3">code_change/3</a></td><td>Restarts the consumer only during a code change as this may be
  required if code within the consumer function has changed, it will
  only be restarted if it was running at the point of change.</td></tr>
<tr><td valign="top"><a href="#consume-5">consume/5</a></td><td>consumes once from the queue, usually used via start_consumer which
  slurps from the queue per milliseconds as set in the poll_rate setting.</td></tr>
<tr><td valign="top"><a href="#crossover-2">crossover/2</a></td><td>initiates a crossover, the replacement of the current queue settings
  with a different arrangement.</td></tr>
<tr><td valign="top"><a href="#get_state-1">get_state/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_call-3">handle_call/3</a></td><td>see the "see also" list for a list of synchronous operations.</td></tr>
<tr><td valign="top"><a href="#handle_cast-2">handle_cast/2</a></td><td>See the "see also" list for a list of asynchronous operations.</td></tr>
<tr><td valign="top"><a href="#handle_info-2">handle_info/2</a></td><td>Info messages are discarded.</td></tr>
<tr><td valign="top"><a href="#init-1">init/1</a></td><td>to initialize a queue the valvex reference to valvex_server
  is required and a queue.</td></tr>
<tr><td valign="top"><a href="#is_consuming-1">is_consuming/1</a></td><td>returns true if the consumer is active.</td></tr>
<tr><td valign="top"><a href="#is_locked-1">is_locked/1</a></td><td>returns true if the queue is locked, more details about what that means
  exist in the readme.</td></tr>
<tr><td valign="top"><a href="#is_tombstoned-1">is_tombstoned/1</a></td><td>returns true if the queue is queued for deletion, it will only be deleted
  once empty and can only be guaranteed to be eventually empty when locked.</td></tr>
<tr><td valign="top"><a href="#lock-1">lock/1</a></td><td>lock the queue, refer to the readme for specifics as to what this means.</td></tr>
<tr><td valign="top"><a href="#pop-1">pop/1</a></td><td>pop the queue, in the case of this backend it's last in first out.</td></tr>
<tr><td valign="top"><a href="#pop_r-1">pop_r/1</a></td><td>pop_r is the reverse operation of whatever pop is, in this case it's
  first in first out.</td></tr>
<tr><td valign="top"><a href="#push-2">push/2</a></td><td>pushes a queue item to the queue.</td></tr>
<tr><td valign="top"><a href="#push_r-2">push_r/2</a></td><td>pushes a queue item to the queue.</td></tr>
<tr><td valign="top"><a href="#size-1">size/1</a></td><td>returns the current number of items in the queue.</td></tr>
<tr><td valign="top"><a href="#start_consumer-1">start_consumer/1</a></td><td>starts a timer that regularly calls the consume function
  to facilitate constant slurping of the queue, how regularly
  is determined by the poll_rate.</td></tr>
<tr><td valign="top"><a href="#start_link-2">start_link/2</a></td><td>starts a link with the queue gen_server.</td></tr>
<tr><td valign="top"><a href="#stop_consumer-1">stop_consumer/1</a></td><td>stops the regular consumption of the queue.</td></tr>
<tr><td valign="top"><a href="#terminate-2">terminate/2</a></td><td>Performs cleanup by stopping the consumer and unregistering
  the queues key if it remains registered for whatever reason.</td></tr>
<tr><td valign="top"><a href="#tombstone-1">tombstone/1</a></td><td>marks the queue for deletion.</td></tr>
<tr><td valign="top"><a href="#unlock-1">unlock/1</a></td><td>unlocks the queue, for more information about what this means
  consult the readme.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="code_change-3">code_change/3</a></h3>
<div class="spec">
<p><tt>code_change(Vsn, S, Extra) -&gt; any()</tt></p>
</div><p>Restarts the consumer only during a code change as this may be
  required if code within the consumer function has changed, it will
  only be restarted if it was running at the point of change.</p>

<h3 class="function"><a name="consume-5">consume/5</a></h3>
<div class="spec">
<p><tt>consume(Valvex::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>, QPid::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>, Backend::<a href="valvex.html#type-queue_backend">valvex:queue_backend()</a>, Key::<a href="valvex.html#type-queue_key">valvex:queue_key()</a>, Timeout::non_neg_integer()) -&gt; ok</tt><br></p>
</div><p>consumes once from the queue, usually used via start_consumer which
  slurps from the queue per milliseconds as set in the poll_rate setting.</p>
<p><b>See also:</b> <a href="start_consumer.html">start_consumer</a>, <a href="valvex.html#type-queue_poll_rate">valvex:queue_poll_rate()</a>.</p>

<h3 class="function"><a name="crossover-2">crossover/2</a></h3>
<div class="spec">
<p><tt>crossover(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>, NuQ::<a href="valvex.html#type-valvex_queue">valvex:valvex_queue()</a>) -&gt; ok</tt><br></p>
</div><p>initiates a crossover, the replacement of the current queue settings
  with a different arrangement.</p>

<h3 class="function"><a name="get_state-1">get_state/1</a></h3>
<div class="spec">
<p><tt>get_state(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>) -&gt; <a href="valvex_queue.html#type-queue_state">valvex_queue:queue_state()</a></tt><br></p>
</div>

<h3 class="function"><a name="handle_call-3">handle_call/3</a></h3>
<div class="spec">
<p><tt>handle_call(X1, From, S) -&gt; any()</tt></p>
</div><p>see the "see also" list for a list of synchronous operations</p>
<p><b>See also:</b> <a href="#type-is_locked">is_locked()</a>, <a href="#type-is_tombstoned">is_tombstoned()</a>, <a href="#type-pop">pop()</a>, <a href="#type-pop_r">pop_r()</a>, <a href="#type-size">size()</a>.</p>

<h3 class="function"><a name="handle_cast-2">handle_cast/2</a></h3>
<div class="spec">
<p><tt>handle_cast(X1, S) -&gt; any()</tt></p>
</div><p>See the "see also" list for a list of asynchronous operations.</p>
<p><b>See also:</b> <a href="#type-crossover">crossover()</a>, <a href="#type-lock">lock()</a>, <a href="#type-push">push()</a>, <a href="#type-push_r">push_r()</a>, <a href="#type-start_consumer">start_consumer()</a>, <a href="#type-stop_consumer">stop_consumer()</a>, <a href="#type-tombstone">tombstone()</a>, <a href="#type-unlock">unlock()</a>.</p>

<h3 class="function"><a name="handle_info-2">handle_info/2</a></h3>
<div class="spec">
<p><tt>handle_info(Info, S) -&gt; any()</tt></p>
</div><p>Info messages are discarded.</p>

<h3 class="function"><a name="init-1">init/1</a></h3>
<div class="spec">
<p><tt>init(X1::list()) -&gt; {ok, <a href="valvex_queue.html#type-queue_state">valvex_queue:queue_state()</a>}</tt><br></p>
</div><p>to initialize a queue the valvex reference to valvex_server
  is required and a queue.</p>
<p><b>See also:</b> <a href="valvex.html#type-valvex_queue">valvex:valvex_queue()</a>, <a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>.</p>

<h3 class="function"><a name="is_consuming-1">is_consuming/1</a></h3>
<div class="spec">
<p><tt>is_consuming(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>) -&gt; true | false</tt><br></p>
</div><p>returns true if the consumer is active.</p>

<h3 class="function"><a name="is_locked-1">is_locked/1</a></h3>
<div class="spec">
<p><tt>is_locked(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>) -&gt; true | false</tt><br></p>
</div><p>returns true if the queue is locked, more details about what that means
  exist in the readme.</p>

<h3 class="function"><a name="is_tombstoned-1">is_tombstoned/1</a></h3>
<div class="spec">
<p><tt>is_tombstoned(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>) -&gt; true | false</tt><br></p>
</div><p>returns true if the queue is queued for deletion, it will only be deleted
  once empty and can only be guaranteed to be eventually empty when locked.</p>

<h3 class="function"><a name="lock-1">lock/1</a></h3>
<div class="spec">
<p><tt>lock(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>) -&gt; ok</tt><br></p>
</div><p>lock the queue, refer to the readme for specifics as to what this means.</p>

<h3 class="function"><a name="pop-1">pop/1</a></h3>
<div class="spec">
<p><tt>pop(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>) -&gt; <a href="valvex.html#type-valvex_q_item">valvex:valvex_q_item()</a></tt><br></p>
</div><p>pop the queue, in the case of this backend it's last in first out.</p>

<h3 class="function"><a name="pop_r-1">pop_r/1</a></h3>
<div class="spec">
<p><tt>pop_r(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>) -&gt; <a href="valvex.html#type-valvex_q_item">valvex:valvex_q_item()</a></tt><br></p>
</div><p>pop_r is the reverse operation of whatever pop is, in this case it's
  first in first out.</p>

<h3 class="function"><a name="push-2">push/2</a></h3>
<div class="spec">
<p><tt>push(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>, Value::<a href="valvex.html#type-valvex_q_item">valvex:valvex_q_item()</a>) -&gt; ok</tt><br></p>
</div><p>pushes a queue item to the queue. The item is placed at the end.</p>
<p><b>See also:</b> <a href="valvex.html#type-valvex_q_item">valvex:valvex_q_item()</a>.</p>

<h3 class="function"><a name="push_r-2">push_r/2</a></h3>
<div class="spec">
<p><tt>push_r(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>, Value::<a href="valvex.html#type-valvex_q_item">valvex:valvex_q_item()</a>) -&gt; ok</tt><br></p>
</div><p>pushes a queue item to the queue. The item is placed at the front.</p>
<p><b>See also:</b> <a href="valvex.html#type-valvex_q_item">valvex:valvex_q_item()</a>.</p>

<h3 class="function"><a name="size-1">size/1</a></h3>
<div class="spec">
<p><tt>size(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>) -&gt; non_neg_integer()</tt><br></p>
</div><p>returns the current number of items in the queue.</p>

<h3 class="function"><a name="start_consumer-1">start_consumer/1</a></h3>
<div class="spec">
<p><tt>start_consumer(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>) -&gt; ok</tt><br></p>
</div><p>starts a timer that regularly calls the consume function
  to facilitate constant slurping of the queue, how regularly
  is determined by the poll_rate.</p>
<p><b>See also:</b> <a href="#type-consume">consume()</a>, <a href="valvex.html#type-queue_poll_rate">valvex:queue_poll_rate()</a>.</p>

<h3 class="function"><a name="start_link-2">start_link/2</a></h3>
<div class="spec">
<p><tt>start_link(Valvex::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>, Q::<a href="valvex.html#type-valvex_queue">valvex:valvex_queue()</a>) -&gt; <a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a></tt><br></p>
</div><p>starts a link with the queue gen_server.</p>

<h3 class="function"><a name="stop_consumer-1">stop_consumer/1</a></h3>
<div class="spec">
<p><tt>stop_consumer(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>) -&gt; ok</tt><br></p>
</div><p>stops the regular consumption of the queue.</p>

<h3 class="function"><a name="terminate-2">terminate/2</a></h3>
<div class="spec">
<p><tt>terminate(Reason, X2) -&gt; any()</tt></p>
</div><p>Performs cleanup by stopping the consumer and unregistering
  the queues key if it remains registered for whatever reason.</p>

<h3 class="function"><a name="tombstone-1">tombstone/1</a></h3>
<div class="spec">
<p><tt>tombstone(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>) -&gt; ok</tt><br></p>
</div><p>marks the queue for deletion.</p>

<h3 class="function"><a name="unlock-1">unlock/1</a></h3>
<div class="spec">
<p><tt>unlock(Q::<a href="valvex.html#type-valvex_ref">valvex:valvex_ref()</a>) -&gt; ok</tt><br></p>
</div><p>unlocks the queue, for more information about what this means
  consult the readme.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Aug 4 2016, 20:28:14.</i></p>
</body>
</html>
